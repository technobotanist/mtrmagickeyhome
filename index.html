<!DOCTYPE html>
<head>
  <meta charset="utf-8">
  <title>Lily Dissection • A-Frame</title>
  <meta name="description" content="Lily Dissection • A-Frame">
  <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
  <script src="https://unpkg.com/aframe-environment-component@1.2.0/dist/aframe-environment-component.min.js"></script>
  <script src="https://unpkg.com/super-hands/dist/super-hands.min.js"></script>
  <script src="https://unpkg.com/aframe-event-set-component@^4.0.0/dist/aframe-event-set-component.min.js"></script>  
  <script src="https://unpkg.com/aframe-physics-extras/dist/aframe-physics-extras.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.6.0/gsap.min.js"></script>
    <script src="https://unpkg.com/aframe-layout-component@4.3.1/dist/aframe-layout-component.min.js"></script> 
  <script type="module">
    import "./GreenSockThree.js";
  </script>
  <script src="./ExaminationBox.js"></script>
  <script src="./Examinable.js"></script>
  <script src="./Rotatable.js"></script>
  <script src="./ExamineCallout.js"></script>
  <script src="./proxy-event.js"></script>

</head>
<body>
  
<!-- 03/31/21 - Combination of environment is done but there's still work to be done to make everything work well together -->
  
<a-scene 
      webxr="referenceSpaceType: local"
      environment
      cursor="rayOrigin: mouse; fuse: false" raycaster="objects: .raycastable"
      event-set__click="_event:click;"
         >
  <a-assets>
    <a-asset-item id="table" src="https://cdn.glitch.com/9e3ddbc0-bfb3-4240-8716-a793e4bd6483%2FTableOpen.glb?v=1616683384876"></a-asset-item>
    <a-asset-item id="containerBox" src="https://cdn.glitch.com/9e3ddbc0-bfb3-4240-8716-a793e4bd6483%2FGlobe_41221.glb?v=1618253122491"></a-asset-item>
    <a-asset-item id="lilyhemisphere"
      src="https://cdn.glitch.com/3352fbd4-6698-4bc9-b59c-f1399bb316e5%2FLily_Full_Half.gltf?v=1615965211555"
      response-type="arraybuffer" crossorigin="anonymous"></a-asset-item>
    <a-image id="calloutBg" src="https://cdn.glitch.com/9e3ddbc0-bfb3-4240-8716-a793e4bd6483%2FCallout_BG.png?v=1618246490561"></a-image>
    
    
    
  </a-assets>
  
  <a-entity position="0 1.55 0.115" rotation="0 -19.1 0" >
    <a-entity camera
              look-controls="mouseEnabled: false"
              position="-0.11 0 -0.66"
              rotation="0 -23.4 0"
              raycaster="objects: .dissect; direction: -24 -3 0;" cursor="rayOrigin:mouse"
              static-body="shape: sphere; sphereRadius: 0.001"
              super-hands="colliderEvent: raycaster-intersection;
                             colliderEventProperty: els;
                             colliderEndEvent:raycaster-intersection-cleared;
                             colliderEndEventProperty: clearedEls;">
        <a-entity
          id="fadeBackground"
          geometry="primitive: sphere; radius: 2.5"
          material="color: black; side: back; shader: flat; transparent: true; opacity: 0.6" visible="false">
        </a-entity>
      </a-entity> 
  </a-entity>
  
  
  <a-entity id="lilywholedissection"
         
         position= "-0.089 1.24 -1.7"
          rotation="0 0 0" >
      <a-entity id="stamens">    
      
       <a-entity id="lilystamen1" 
                mixin="frame" 
                 class="dissect" 
                hoverable grabbable stretchable draggable droppable
                 shadow examinable="headerText: Lily Stamen; contentText: Each stamen consists of a filament (stalk) and anther. Pollen is produced inside the chambers of the anther and released when the anther dehisces (breaks open).;"
                scale="0.14 0.14 0.14"
                 gltf-model="https://cdn.glitch.com/3352fbd4-6698-4bc9-b59c-f1399bb316e5%2FLily_Stamen_1.gltf?v=1615974819978">

          </a-entity>
      
             <a-entity id="lilystamen2" 
                mixin="frame" 
                 class="dissect" 
                hoverable grabbable stretchable draggable droppable
                 shadow examinable="headerText: Lily Stamen; contentText: Each stamen consists of a filament (stalk) and anther. Pollen is produced inside the chambers of the anther and released when the anther dehisces (breaks open).;"
                scale="0.14 0.14 0.14"
                 gltf-model="https://cdn.glitch.com/3352fbd4-6698-4bc9-b59c-f1399bb316e5%2FLily_Stamen_2.gltf?v=1616117308966"
                 >
          </a-entity>

      
             <a-entity id="lilystamen3" 
                mixin="frame" 
                 class="dissect" 
                hoverable grabbable stretchable draggable droppable
                 shadow examinable="headerText: Lily Stamen; contentText: Each stamen consists of a filament (stalk) and anther. Pollen is produced inside the chambers of the anther and released when the anther dehisces (breaks open).;"
                scale="0.14 0.14 0.14"
               gltf-model="https://cdn.glitch.com/3352fbd4-6698-4bc9-b59c-f1399bb316e5%2FLily_Stamen_3.gltf?v=1615974821270"
                 >
          </a-entity>

                   <a-entity id="lilystamen4" 
                mixin="frame" 
                 class="dissect" 
                hoverable grabbable stretchable draggable droppable
                 shadow examinable="headerText: Lily Stamen; contentText: Each stamen consists of a filament (stalk) and anther. Pollen is produced inside the chambers of the anther and released when the anther dehisces (breaks open).;"
                scale="0.14 0.14 0.14"
                gltf-model="https://cdn.glitch.com/3352fbd4-6698-4bc9-b59c-f1399bb316e5%2FLily_Stamen_4.gltf?v=1615974818446"
                 >
          </a-entity>
      
                   <a-entity id="lilystamen5" 
                mixin="frame" 
                 class="dissect" 
                hoverable grabbable stretchable draggable droppable
                 shadow examinable="headerText: Lily Stamen; contentText: Each stamen consists of a filament (stalk) and anther. Pollen is produced inside the chambers of the anther and released when the anther dehisces (breaks open).;"
              scale="0.14 0.14 0.14"
              gltf-model="https://cdn.glitch.com/3352fbd4-6698-4bc9-b59c-f1399bb316e5%2FLily_Stamen_5.gltf?v=1615974819486"
                 >
          </a-entity> 
        
        <a-entity id="lilystamen6" 
                mixin="frame" 
                 class="dissect" 
                hoverable grabbable stretchable draggable droppable
                 shadow examinable="headerText: Lily Stamen; contentText: Each stamen consists of a filament (stalk) and anther. Pollen is produced inside the chambers of the anther and released when the anther dehisces (breaks open).;"
                scale="0.14 0.14 0.14"
                gltf-model="https://cdn.glitch.com/3352fbd4-6698-4bc9-b59c-f1399bb316e5%2FLily_Stamen_6.gltf?v=1615974820176"
                 >
          </a-entity>
  
</a-entity>
      
      <a-entity id="petals">
      
             <a-entity id="lilypetalA1" 
                mixin="frame" 
                 class="dissect" 
                hoverable grabbable stretchable draggable droppable
                 shadow 
                examinable="headerText: Lily Tepal; contentText: In the strictest sense, the petal and sepal whorls of the lily are not differentiated in appearance so they are called tepals. The tepals collectively make up the perianth of this flower.;"
                scale="0.14 0.14 0.14"
                gltf-model="https://cdn.glitch.com/3352fbd4-6698-4bc9-b59c-f1399bb316e5%2FLily_PetalA_1.gltf?v=1616117871787"
                 >
          </a-entity>
      
             <a-entity id="lilypetalA2" 
                mixin="frame" 
                 class="dissect" 
                hoverable grabbable stretchable draggable droppable
                   shadow 
                examinable="headerText: Lily Tepal; contentText: In the strictest sense, the petal and sepal whorls of the lily are not differentiated in appearance so they are called tepals. The tepals collectively make up the perianth of this flower.;"
                scale="0.14 0.14 0.14"
                gltf-model="https://cdn.glitch.com/3352fbd4-6698-4bc9-b59c-f1399bb316e5%2FLily_PetalA_2.gltf?v=1616117851829"
                 >
          </a-entity>

      
             <a-entity id="lilypetalA3" 
                mixin="frame" 
                 class="dissect" 
                hoverable grabbable stretchable draggable droppable
                 shadow 
                examinable="headerText: Lily Tepal; contentText: In the strictest sense, the petal and sepal whorls of the lily are not differentiated in appearance so they are called tepals. The tepals collectively make up the perianth of this flower.;"
                scale="0.14 0.14 0.14"
                gltf-model="https://cdn.glitch.com/3352fbd4-6698-4bc9-b59c-f1399bb316e5%2FLily_PetalA_3.gltf?v=1616117862525"
                 >
          </a-entity>

                   <a-entity id="lilypetalB1" 
                mixin="frame" 
                 class="dissect" 
                hoverable grabbable stretchable draggable droppable
                 shadow                 
                examinable="headerText: Lily Tepal; contentText: In the strictest sense, the petal and sepal whorls of the lily are not differentiated in appearance so they are called tepals. The tepals collectively make up the perianth of this flower.;"
                 scale="0.14 0.14 0.14"
                gltf-model="https://cdn.glitch.com/3352fbd4-6698-4bc9-b59c-f1399bb316e5%2FLily_PetalB_1.gltf?v=1616117873108"
                 >
          </a-entity>
      
                   <a-entity id="lilypetalB2" 
                mixin="frame" 
                 class="dissect" 
                hoverable grabbable stretchable draggable droppable
                shadow                 
                examinable="headerText: Lily Tepal; contentText: In the strictest sense, the petal and sepal whorls of the lily are not differentiated in appearance so they are called tepals. The tepals collectively make up the perianth of this flower.;"
                scale="0.14 0.14 0.14"
                gltf-model="https://cdn.glitch.com/3352fbd4-6698-4bc9-b59c-f1399bb316e5%2FLily_PetalB_2.gltf?v=1616117870335"
                 >
          </a-entity> 
        <a-entity id="lilypetalB3" 
                mixin="frame" 
                 class="dissect" 
                hoverable grabbable stretchable draggable droppable
                shadow                 
                examinable="headerText: Lily Tepal; contentText: In the strictest sense, the petal and sepal whorls of the lily are not differentiated in appearance so they are called tepals. The tepals collectively make up the perianth of this flower.;"
                scale="0.14 0.14 0.14"
                gltf-model="https://cdn.glitch.com/3352fbd4-6698-4bc9-b59c-f1399bb316e5%2FLily_PetalB_3.gltf?v=1616117869899"
                 >
          </a-entity>
      
      </a-entity>
      
       <a-entity id="lilycenter">
      
             <a-entity id="lilycenterwhole" 
                mixin="frame" 
                 class="dissect collidable"
                hoverable grabbable stretchable draggable droppable
                shadow                 
                examinable="headerText: Pistil; contentText: The pistil consists of an ovary, style, and stigma. Ovules are produced inside the ovary and mature into seeds following fertilization. The stigma functions as a landing pad to catch pollen while the style is a stalk to project the stigma outward."
                scale="0.14 0.14 0.14"
               gltf-model="https://cdn.glitch.com/3352fbd4-6698-4bc9-b59c-f1399bb316e5%2FLily_Center_Longitudinal.gltf?v=1616119609612"
                 >
          </a-entity>
      </a-entity>
   </a-entity>
  
  <a-entity light="type: hemisphere; intensity: 0.51; castShadow: false"></a-entity>      
      
      <!-- Hand controls -->
      <a-entity id="leftHand" laser-controls="hand: left" raycaster="objects: .raycastable"></a-entity>
      <a-entity id="rightHand" laser-controls="hand: right" raycaster="objects: .raycastable" line="color: #118A7E"></a-entity>

    <a-entity gltf-model="#table" scale = "0.7 0.7 0.7" position="0 0 -0.466" rotation="0 90 0"></a-entity>
  
  <a-entity id="ExamBox" gltf-model="#containerBox" position="0.945 1.125 -1.200" rotation="0 11.705 0" scale="0.4 0.4 0.4" exambox="snapedRotation: 45 0 0; snapedScale: 0.6 0.6 0.6; snapedOffset:0 0.6 0" >
             <a-entity id="examinecallout"
                     geometry="primitive: plane; height: 0.5"
                       position="-0.5 0.5 0.2"
                       rotation="0 -66 0"
                       material="src: #calloutBg"
                       examinecallout>
               <a-entity id="examinetextheader" text="value: W;" position="0.138 0.166 0.006" scale="1.2 1.2 1.2"></a-entity>
               <a-entity id="examinetextbody" text="value: C;" position="0.008 -0.045 0.004"></a-entity>
    </a-entity>
  </a-entity>
  
  
  
<!--   UI system test object-->
      <a-entity id="totem" geometry="" position="0.91 1.303 -0.838" scale="0.1 0.1 0.1" material="color: #808040; emissive: #000000; emissiveIntensity: 2.03; metalness: 0.13; roughness: 0.9"></a-entity>
<!--   UI system buttons to emit proxy events -->
<a-entity id="Examination2DUI" layout="margin: 1; angle: NaN; columns: 3" scale="0.075 0.05 0.05" position="0.745 1.17 -1.2" rotation="0 -55 0">
  <a-box id="scale1button" class="dissect" position="" material="color: #ff0000" geometry=""
         event-set__scaled1 = "
                _event : click;
                _target : #totem;
                animation.property : scale;
                animation.to: 0.1 0.1 0.1;"
        
         event-set__lightscale1light = "
                _event : click;
                _target : #scale1light;
                animation.property : components.;
                animation.to: 10 10 10;"
         
         event-set__dimscale2light = "
                _event : click;
                _target : #scale2light;
                animation.property : intensity;
                animation.to: 0;"
        
         event-set__dimscale3light = "
                _event : click;
                _target : #scale3light;
                animation.property : intensity;
                animation.to: 0;">
    <a-entity id="scale1light" light="type:  point;  color:  #ff0000;  decay:  1.5;  distance:  0.2;  intensity:  10"></a-entity></a-box>
  
  <a-box id="scale2button" class="dissect" position="2 0 0" material="color: #ffff00" geometry=""
         event-set__scaled2 = "
                _event : click;
                _target : #totem;
                animation.property : scale;
                animation.to: 0.15 0.15 0.15;"
         
        event-set__lightscale2light = "
                _event : click;
                _target : #scale2light;
                animation.property : intensity;
                animation.to: 10;"
         
         event-set__dimscale1light = "
                _event : click;
                _target : #scale1light;
                animation.property : intensity;
                animation.to: 0;"
        
         event-set__dimscale3light = "
                _event : click;
                _target : #scale3light;
                animation.property : intensity;
                animation.to: 0;" >
    
    <a-entity id="scale2light" light="type:  point;  color:  #ffff00;  decay:  1.5;  distance:  0.2;  intensity:  0"></a-entity></a-box>
  
  <a-box id="scale3button" class="dissect" position="4 0 0" material="color: #008000" geometry=""
         event-set__scaled3 = "
                _event : click;
                _target : #totem;
                animation.property : scale;
                animation.to: 0.2 0.2 0.2;"
         
        event-set__lightscale3light = "
                _event : click;
                _target : #scale3light;
                animation.property : intensity;
                animation.to: 10;"
         
         event-set__dimscale1light = "
                _event : click;
                _target : #scale1light;
                animation.property : intensity;
                animation.to: 0;"
        
         event-set__dimscale2light = "
                _event : click;
                _target : #scale2light;
                animation.property : intensity;
                animation.to: 0;" 
         >
  <a-entity id="scale3light" light="type:  point;  color:  #008000;  decay:  1.5;  distance:  0.2;  intensity:  0"></a-entity>
  </a-box>
</a-entity>
  
</a-scene>
</body>