<!DOCTYPE html>
<head>
  <meta charset="utf-8">
  <title>Lily Dissection • A-Frame</title>
  <meta name="description" content="Lily Dissection • A-Frame">
  
<!--   This is a series of components and plugins used -->
<!-- AFrame webXR Library   -->
  <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
<!-- Superhands allows drag and rotation function -->
<script src="./superhands.js"></script>  
<!--Environment Component  -->
  <script src="./environment-component.js"></script>
<!--Buttons and other event system uses event-set component and proxy events -->
  <script src="./eventset.js"></script> 
  <script src="./proxy-event.js"></script>
<!--   Physics isn't used in a major way but is loaded in to support development -->
  <script src="./aframeextras.js'"></script>
<!-- GSAP (GreenSock Animation Platform) for animation addons like tweening -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.6.0/gsap.min.js"></script>
  <script type="module">
    import "./GreenSockThree.js";
  </script>
  
<!--   The layout of buttons utilizes layout component and text positioning uses look-at-->
<script src="./layout.js"></script> 
    <script src="./lookat.js"></script> 
  
<!--   unique examination box components -->
  <script src="./Rotatable.js"></script>
  <script src="./ScaleButton.js"></script>

  
  <script src="./linkhref.js"></script>
<script src="./info-message.js"></script>
<script src="https://unpkg.com/aframe-troika-text/dist/aframe-troika-text.min.js"></script>
    
<!--     Local scripts -->
    <script src="./playtracks.js"></script>
    <script src="./aframe-audioanalyser-component.js"></script> 
    <script src="./audio-level-scale-component.js"></script>
    <script src="./audio-ring-on-beat.js"></script>
    <script src="./audio-ring-on-beat2.js"></script>
    <script src="./frequency-spectum-component.js"></script>
    <script src="./spectrogram-component.js"></script>
    <script src="./proxy-event.js"></script>
    <script src="./info-message.js"></script>
    <script src="./audio-light-on-beat.js"></script>
    <script src="shader-grid-glitch.js"></script>
    <script src="shader-hologram.js"></script>
</head>
<body>
  
<a-scene 
      webxr="referenceSpaceType: local"
      cursor="rayOrigin: mouse; fuse: false" raycaster="objects: .raycastable"
      event-set__click="_event:click;"
      info-message="htmlSrc: #messageText"
      
         >
  
<!-- Media assets used throughout experience    -->
  <a-assets>

    <a-asset-item id="magickeytitlingfont" src="https://cdn.glitch.com/5403985f-c618-4935-8236-9feef6f16844%2FMagicKeyTitlingFont.ttf?v=1624219939229"></a-asset-item>
    <a-asset-item id="magickey" src="https://cdn.glitch.com/5403985f-c618-4935-8236-9feef6f16844%2FMTRMagicKeyTrueOrigin.gltf?v=1624219992990" preload="auto"></a-asset-item>

<!--Load your 6 audio tracks -->
<audio id="lane1" class="music1" src="https://cdn.glitch.com/b0549471-c315-468a-a311-ae093a717da9%2FLDlane1_kastelheimer.mp3?v=1620793707559" preload="auto"></audio>
<audio id="lane2" class="music2" src="https://cdn.glitch.com/767fd2d2-6ae7-43b7-80fe-ef9da2ecdcbc%2FLDlane2_drums.mp3?v=1620345794733" preload="auto"></audio>
<audio id="lane3" class="music3" src="https://cdn.glitch.com/767fd2d2-6ae7-43b7-80fe-ef9da2ecdcbc%2FLDlane3leadsynth.mp3?v=1620345794715" preload="auto"></audio>
<audio id="lane4" class="music4" src="https://cdn.glitch.com/767fd2d2-6ae7-43b7-80fe-ef9da2ecdcbc%2FLDlane4backingOrgan.mp3?v=1620345794676" preload="auto"></audio> 
<audio id="lane5" class="music5" src="https://cdn.glitch.com/767fd2d2-6ae7-43b7-80fe-ef9da2ecdcbc%2FLDlane5wailsynth.mp3?v=1620345794392" preload="auto"></audio> 
<audio id="lane6" class="music6" src="https://cdn.glitch.com/767fd2d2-6ae7-43b7-80fe-ef9da2ecdcbc%2FLDlane6midgroundsynth.mp3?v=1620345794703" preload="auto"></audio>

<!--Brand 3 Models -->        
<a-asset-item id="whitemagickeytext" src="https://cdn.glitch.com/b0549471-c315-468a-a311-ae093a717da9%2FWhiteMTRMagicKeyText.glb?v=1622588033910" preload="auto"></a-asset-item>
<a-asset-item id="silvermagickeytext" src="https://cdn.glitch.com/b0549471-c315-468a-a311-ae093a717da9%2FSilverMTRMagicKeyText.glb?v=1622588033811" preload="auto"></a-asset-item>
<a-asset-item id="goldmagickeytext" src="https://cdn.glitch.com/b0549471-c315-468a-a311-ae093a717da9%2FGoldMTRMagicKeyText.glb?v=1622588033726" preload="auto"></a-asset-item>
<a-asset-item id="pinkmagickeytext" src="https://cdn.glitch.com/b0549471-c315-468a-a311-ae093a717da9%2FPinkMTRMagicKeyText.glb?v=1622588033929" preload="auto"></a-asset-item>
<a-asset-item id="bluemagickeytext" src="https://cdn.glitch.com/b0549471-c315-468a-a311-ae093a717da9%2FBlueMTRMagicKeyText.glb?v=1622588033626" preload="auto"></a-asset-item>
<a-asset-item id="greenmagickeytext" src="https://cdn.glitch.com/b0549471-c315-468a-a311-ae093a717da9%2FGreenMTRMagicKeyText.glb?v=1622588033748" preload="auto"></a-asset-item>

<!-- Text for bottom right corner pop up -->
<a-asset-item id="messageText" src="message.html"></a-asset-item>


 <a-mixin   
          id="splashaway"
                    event-set__splashaway1= "
                _event : click;
                _target : #startprompt;
                animation.property : position;
                animation.to: 0 106.5 -15         ;"
          ></a-mixin>
        
   <a-mixin   
          id="magickeywhitetextaway"
          event-set__whitetextaway= "
                _event : click;
                _target : #whitemagickey;
                animation.property : visible;
                animation.to: false;"
          ></a-mixin>
           <a-mixin   
          id="magickeysilvertextaway"
          event-set__silvertextaway= "
                _event : click;
                _target : #silvermagickey;
                animation.property : visible;
                animation.to: false;"
          ></a-mixin>
           <a-mixin   
          id="magickeygoldtextaway"
          event-set__goldtextaway= "
                _event : click;
                _target : #goldmagickey;
                animation.property : visible;
                animation.to: false;"
          ></a-mixin>
           <a-mixin   
          id="magickeypinktextaway"
          event-set__pinktextaway= "
                _event : click;
                _target : #pinkmagickey;
                animation.property : visible;
                animation.to: false;"
          ></a-mixin>
           <a-mixin   
          id="magickeybluetextaway"
          event-set__bluetextaway= "
                _event : click;
                _target : #bluemagickey;
                animation.property : visible;
                animation.to: false;"
          ></a-mixin>
           <a-mixin   
          id="magickeygreentextaway"
          event-set__greentextaway= "
                _event : click;
                _target : #greenmagickey;
                animation.property : visible;
                animation.to: false;"
          ></a-mixin>
   


    
<!--     This html document feeds the 'info' popup in the corner, it can have images and links embedded -->
            <a-asset-item id="messageText" src="message.html"></a-asset-item>


<!-- Sounds used within the interaction system-->
<a-sound id="click1" src="https://cdn.glitch.com/9e3ddbc0-bfb3-4240-8716-a793e4bd6483%2Fclick1dry.mp3?v=1620252061034"></a-sound>
<a-sound id="click2" src="https://cdn.glitch.com/9e3ddbc0-bfb3-4240-8716-a793e4bd6483%2Fclick2dry.mp3?v=1620252061033"></a-sound>
<a-sound id="click3" src="https://cdn.glitch.com/9e3ddbc0-bfb3-4240-8716-a793e4bd6483%2Fclick3dry.mp3?v=1620252061083"></a-sound>
<a-sound id="clickyes" src="https://cdn.glitch.com/9e3ddbc0-bfb3-4240-8716-a793e4bd6483%2FclickYesdry.mp3?v=1620252061034"></a-sound>  
<a-sound id="clickno" src="https://cdn.glitch.com/9e3ddbc0-bfb3-4240-8716-a793e4bd6483%2FclickNodry.mp3?v=1620252061144"></a-sound>    
  </a-assets>

<!-- At the minimum we'd also want to setup an environment light, although we might also need to explore background options -->
<a-sky id="sky" phi-start="45" src=""></a-sky>
  <a-light id="sun" angle="60" color="#FFF" intensity="0.4" type="hemisphere"></a-light>

         
<!-- Camera rig serves as user perspective. User cannot pivot camera and raycast emits from this view-->
  <a-entity id="rig" position="0 1.55 0.115" rotation="0 -19.1 0" >
    <a-entity camera
              look-controls="mouseEnabled: false"
              position="-0.11 0 -0.66"
              rotation="0 -23.4 0"
              raycaster="objects: .dissect; direction: -24 -3 0;" 
              cursor="rayOrigin:mouse"
              static-body="shape: sphere; sphereRadius: 0.001"
              super-hands="colliderEvent: raycaster-intersection;
                             colliderEventProperty: els;
                             colliderEndEvent:raycaster-intersection-cleared;
                             colliderEndEventProperty: clearedEls;">
<!--         <a-entity
          id="fadeBackground"
          geometry="primitive: sphere; radius: 2.5"
          material="color: black; side: back; shader: flat; transparent: true; opacity: 0.6" visible="false">
        </a-entity> -->
      </a-entity> </a-entity> 
    

 
     
      <!-- Hand controls are defined to get raycast capability to allow button interaction while using them -->
      <a-entity id="leftHand" laser-controls="hand: left" raycaster="objects: .raycastable"></a-entity>
      <a-entity id="rightHand" laser-controls="hand: right" raycaster="objects: .raycastable" line="color: #118A7E"></a-entity>


</a-scene>
</body>